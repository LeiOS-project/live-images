#!/bin/bash

PACKAGE_VERSION="1.0.0"

# Loop over all matching files
for file in leios-*-amd64.*; do
    # Skip if no files match
    [[ -e "$file" ]] || continue

    # Extract version using regex
    if [[ "$file" =~ leios-([0-9]+\.[0-9]+\.[0-9]+)-amd64 ]]; then
        version="${BASH_REMATCH[1]}"
        echo "File: $file  --> Version: $version"
    else
        echo "File: $file  --> No version found"
    fi
done


curl --location --user "$GIT_DEPLOY_KEY_ID:$GIT_DEPLOY_KEY_SECRET" \ 
     --upload-file leios-0.5.0-amd64.hybrid.iso \
     "https://git.leicraftmc.de/api/v4/projects/5/packages/generic/releases/0.5.0/leios-0.5.0-amd64.hybrid.iso"

echo "Uploaded: $filename"

